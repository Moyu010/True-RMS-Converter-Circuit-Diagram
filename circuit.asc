Version 4
SHEET 1 4272 3124
WIRE 32 64 -128 64
WIRE -128 128 -128 64
WIRE 32 128 32 64
WIRE 416 128 320 128
WIRE -128 224 -128 208
WIRE 112 224 -128 224
WIRE 320 224 320 128
WIRE -128 256 -128 224
WIRE 32 256 32 192
WIRE 320 368 320 304
WIRE -128 384 -128 336
WIRE 32 384 32 320
WIRE 32 384 -128 384
WIRE 2576 768 2416 768
WIRE 2768 768 2656 768
WIRE 1312 800 1184 800
WIRE 1488 800 1408 800
WIRE 1968 800 1488 800
WIRE -1088 848 -1136 848
WIRE -864 848 -1008 848
WIRE 1488 848 1488 800
WIRE 1360 880 1360 864
WIRE 1648 880 1360 880
WIRE 1184 944 1184 800
WIRE 1216 944 1184 944
WIRE 1456 944 1280 944
WIRE -1136 960 -1136 848
WIRE -1088 960 -1136 960
WIRE -944 960 -1024 960
WIRE 2416 1040 2416 768
WIRE 2416 1040 2272 1040
WIRE 2576 1040 2416 1040
WIRE 944 1056 800 1056
WIRE 1184 1056 1184 944
WIRE 1184 1056 1024 1056
WIRE 1328 1056 1184 1056
WIRE 2768 1056 2768 768
WIRE 2768 1056 2640 1056
WIRE 2992 1056 2768 1056
WIRE 1456 1072 1456 944
WIRE 1456 1072 1392 1072
WIRE 1488 1072 1488 928
WIRE 1488 1072 1456 1072
WIRE 1968 1088 1968 800
WIRE 2112 1088 1968 1088
WIRE 2272 1088 2272 1040
WIRE 2272 1088 2208 1088
WIRE -1056 1104 -1056 1072
WIRE -1232 1120 -1760 1120
WIRE -1136 1120 -1136 960
WIRE -1136 1120 -1152 1120
WIRE -1088 1120 -1136 1120
WIRE -352 1120 -432 1120
WIRE -944 1136 -944 960
WIRE -944 1136 -1024 1136
WIRE -864 1136 -864 848
WIRE -864 1136 -880 1136
WIRE -512 1136 -864 1136
WIRE -1088 1152 -1168 1152
WIRE -352 1168 -352 1120
WIRE 1312 1200 1184 1200
WIRE 1488 1200 1408 1200
WIRE 1648 1200 1648 880
WIRE 1648 1200 1488 1200
WIRE -1056 1216 -1056 1168
WIRE -512 1216 -512 1136
WIRE -432 1216 -432 1120
WIRE -400 1216 -432 1216
WIRE -208 1216 -320 1216
WIRE 800 1216 800 1056
WIRE 800 1216 736 1216
WIRE -1168 1248 -1168 1152
WIRE 1488 1248 1488 1200
WIRE -1760 1264 -1760 1120
WIRE -1760 1264 -1952 1264
WIRE -944 1280 -1056 1280
WIRE -944 1328 -944 1280
WIRE 1184 1328 1184 1200
WIRE 1232 1328 1184 1328
WIRE 1440 1328 1296 1328
WIRE -304 1360 -304 1328
WIRE -1056 1376 -1056 1280
WIRE -1056 1376 -1152 1376
WIRE -992 1376 -1056 1376
WIRE -880 1376 -912 1376
WIRE -432 1376 -432 1216
WIRE -336 1376 -432 1376
WIRE -208 1392 -208 1216
WIRE -208 1392 -272 1392
WIRE -128 1392 -208 1392
WIRE 800 1456 800 1216
WIRE 944 1456 800 1456
WIRE 1184 1456 1184 1328
WIRE 1184 1456 1024 1456
WIRE 1328 1456 1184 1456
WIRE -1456 1472 -1552 1472
WIRE -1312 1472 -1376 1472
WIRE 1440 1472 1440 1328
WIRE 1440 1472 1392 1472
WIRE 1488 1472 1488 1328
WIRE 1488 1472 1440 1472
WIRE -1152 1488 -1152 1376
WIRE -1104 1488 -1152 1488
WIRE -960 1488 -1040 1488
WIRE -1424 1616 -1424 1584
WIRE -1760 1632 -1760 1264
WIRE -1632 1632 -1760 1632
WIRE -1552 1632 -1552 1472
WIRE -1456 1632 -1552 1632
WIRE -1072 1632 -1072 1600
WIRE -1312 1648 -1312 1472
WIRE -1312 1648 -1392 1648
WIRE -1248 1648 -1312 1648
WIRE -1152 1648 -1152 1488
WIRE -1152 1648 -1168 1648
WIRE -1104 1648 -1152 1648
WIRE -960 1664 -960 1488
WIRE -960 1664 -1040 1664
WIRE -880 1664 -880 1376
WIRE -880 1664 -896 1664
WIRE -512 1664 -512 1376
WIRE -512 1664 -880 1664
WIRE 1312 1664 1184 1664
WIRE 1488 1664 1408 1664
WIRE 2160 1664 2160 1152
WIRE 2160 1664 1488 1664
WIRE -1104 1680 -1184 1680
WIRE 1488 1712 1488 1664
WIRE -1424 1728 -1424 1680
WIRE -1072 1744 -1072 1696
WIRE -1184 1776 -1184 1680
WIRE 1184 1808 1184 1664
WIRE 1232 1808 1184 1808
WIRE 1456 1808 1296 1808
WIRE 944 1920 800 1920
WIRE 1184 1920 1184 1808
WIRE 1184 1920 1024 1920
WIRE 1328 1920 1184 1920
WIRE 1456 1936 1456 1808
WIRE 1456 1936 1392 1936
WIRE 1488 1936 1488 1792
WIRE 1488 1936 1456 1936
WIRE 224 2432 144 2432
WIRE 224 2480 224 2432
WIRE -800 2496 -1152 2496
WIRE 144 2528 144 2432
WIRE 144 2528 48 2528
WIRE 176 2528 144 2528
WIRE 336 2528 256 2528
WIRE 768 2576 672 2576
WIRE 912 2576 848 2576
WIRE -32 2720 -160 2720
WIRE 48 2720 48 2528
WIRE 160 2720 48 2720
WIRE 336 2736 336 2528
WIRE 336 2736 224 2736
WIRE 496 2736 336 2736
WIRE 672 2736 672 2576
WIRE 672 2736 576 2736
WIRE 784 2736 672 2736
WIRE 912 2752 912 2576
WIRE 912 2752 848 2752
WIRE 1040 2752 912 2752
WIRE -1152 2768 -1152 2496
WIRE -992 2768 -1152 2768
WIRE -800 2784 -800 2496
WIRE -800 2784 -928 2784
WIRE -688 2784 -800 2784
WIRE -1248 2800 -1440 2800
WIRE -1152 2800 -1168 2800
WIRE -992 2800 -1072 2800
WIRE -1072 2976 -1072 2800
WIRE -1072 3104 -1072 3040
FLAG 112 224 0
FLAG -128 64 V+
IOPIN -128 64 BiDir
FLAG -128 384 V-
IOPIN -128 384 BiDir
FLAG 320 368 0
FLAG 416 128 Vin
IOPIN 416 128 Out
FLAG -1056 1072 V+
IOPIN -1056 1072 BiDir
FLAG -1056 1216 V-
IOPIN -1056 1216 BiDir
FLAG -1168 1248 0
FLAG -1072 1600 V+
IOPIN -1072 1600 BiDir
FLAG -1072 1744 V-
IOPIN -1072 1744 BiDir
FLAG -1184 1776 0
FLAG -1424 1584 V+
IOPIN -1424 1584 BiDir
FLAG -1424 1728 V-
IOPIN -1424 1728 BiDir
FLAG -1456 1664 0
FLAG -304 1328 V+
IOPIN -304 1328 BiDir
FLAG -336 1408 0
FLAG -304 1424 V-
IOPIN -304 1424 BiDir
FLAG -128 1392 Vrec
IOPIN -128 1392 Out
FLAG -1952 1264 Vin
IOPIN -1952 1264 In
FLAG 1360 1264 0
FLAG 1328 1488 0
FLAG 1328 1088 0
FLAG 1360 1040 V+
IOPIN 1360 1040 BiDir
FLAG 1360 1440 V+
IOPIN 1360 1440 BiDir
FLAG 1360 1104 V-
IOPIN 1360 1104 BiDir
FLAG 1360 1504 V-
IOPIN 1360 1504 BiDir
FLAG 1360 1728 0
FLAG 1328 1952 0
FLAG 1360 1904 V+
IOPIN 1360 1904 BiDir
FLAG 1360 1968 V-
IOPIN 1360 1968 BiDir
FLAG 2576 1072 0
FLAG 2608 1024 V+
IOPIN 2608 1024 BiDir
FLAG 2608 1088 V-
IOPIN 2608 1088 BiDir
FLAG 736 1216 Vrec
IOPIN 736 1216 In
FLAG 2992 1056 Vsquared
IOPIN 2992 1056 Out
FLAG -960 2752 V+
IOPIN -960 2752 BiDir
FLAG -960 2816 V-
IOPIN -960 2816 BiDir
FLAG -1072 3104 0
FLAG -1440 2800 Vsquared
IOPIN -1440 2800 In
FLAG -688 2784 Vrms_bscaling
IOPIN -688 2784 Out
FLAG 192 2704 V+
IOPIN 192 2704 BiDir
FLAG 192 2768 V-
IOPIN 192 2768 BiDir
FLAG 816 2720 V+
IOPIN 816 2720 BiDir
FLAG 816 2784 V-
IOPIN 816 2784 BiDir
FLAG 160 2752 0
FLAG 784 2768 0
FLAG 1040 2752 Vrms
IOPIN 1040 2752 Out
FLAG -160 2720 Vrms_bscaling
IOPIN -160 2720 In
FLAG 800 1920 Vrms_bscaling
IOPIN 800 1920 In
DATAFLAG 800 1216 ""
SYMBOL voltage -128 112 R0
SYMATTR InstName V1
SYMATTR Value 5
SYMBOL voltage -128 240 R0
SYMATTR InstName V2
SYMATTR Value 5
SYMBOL polcap 16 128 R0
SYMATTR InstName C1
SYMATTR Value 10µ
SYMBOL polcap 16 256 R0
SYMATTR InstName C2
SYMATTR Value 10µ
SYMBOL voltage 336 -80 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value SINE({Offset} {Amplitude} {Freq})
SYMBOL voltage 320 208 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value PULSE({-Amplitude+Offset} {Amplitude+Offset} 0 {1/2/Freq} {1/2/Freq} 0 {1/Freq})
SYMBOL voltage 880 160 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V5
SYMATTR Value PULSE({-Amplitude} {Amplitude} 0 0 0 {1/Freq/2} {1/Freq})
SYMBOL res -1136 1104 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value {RectResVal}
SYMBOL res -992 832 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R9
SYMATTR Value {RectResVal}
SYMBOL diode -1024 944 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D3
SYMATTR Value 1N4148
SYMBOL diode -880 1120 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D4
SYMATTR Value 1N4148
SYMBOL TL974 -1056 1136 R0
SYMATTR InstName U4
SYMBOL res -1152 1632 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R10
SYMATTR Value {RectResVal}
SYMBOL diode -1040 1472 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D7
SYMATTR Value 1N4148
SYMBOL diode -896 1648 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D8
SYMATTR Value 1N4148
SYMBOL TL974 -1072 1664 R0
SYMATTR InstName U5
SYMBOL TL974 -1424 1648 R0
SYMATTR InstName U6
SYMBOL res -1360 1456 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R11
SYMATTR Value {RectResVal}
SYMBOL res -1536 1616 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R22
SYMATTR Value {RectResVal}
SYMBOL TL974 -304 1392 R0
SYMATTR InstName U11
SYMBOL res -416 1200 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R23
SYMATTR Value {RectResVal}
SYMBOL pot -416 1232 R270
WINDOW 3 142 -44 VRight 2
SYMATTR Value Rtot=10k wiper={TunePeak/10000}
SYMATTR InstName U16
SYMBOL pot -1008 1392 R270
WINDOW 3 150 -55 VRight 2
SYMATTR Value Rtot=10K wiper={TuneDiff/10000}
SYMATTR InstName U17
SYMBOL TL974 1360 1072 R0
SYMATTR InstName U1
SYMBOL npn 1312 864 R270
SYMATTR InstName Q1
SYMATTR Value BD135
SYMBOL res 1040 1040 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 1k
SYMBOL res 1472 832 R0
SYMATTR InstName R2
SYMATTR Value 220
SYMBOL TL974 1360 1472 R0
SYMATTR InstName U2
SYMBOL npn 1312 1264 R270
SYMATTR InstName Q2
SYMATTR Value BD135
SYMBOL res 1040 1440 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 1k
SYMBOL res 1472 1232 R0
SYMATTR InstName R4
SYMATTR Value 220
SYMBOL TL974 1360 1936 R0
SYMATTR InstName U3
SYMBOL npn 1312 1728 R270
SYMATTR InstName Q3
SYMATTR Value BD135
SYMBOL res 1040 1904 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 1k
SYMBOL res 1472 1696 R0
SYMATTR InstName R6
SYMATTR Value 220
SYMBOL npn 2208 1152 M270
SYMATTR InstName Q4
SYMATTR Value BD135
SYMBOL TL974 2608 1056 R0
SYMATTR InstName U7
SYMBOL res 2672 752 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value 1k
SYMBOL cap 1280 928 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C3
SYMATTR Value 470p
SYMBOL cap 1296 1312 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C4
SYMATTR Value 470p
SYMBOL cap 1296 1792 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C5
SYMATTR Value 470p
SYMBOL TL974 -960 2784 R0
SYMATTR InstName U8
SYMBOL cap -1088 2976 R0
SYMATTR InstName C6
SYMATTR Value 470µ
SYMBOL res -1056 2784 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R12
SYMATTR Value 1k
SYMBOL res -1152 2784 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R13
SYMATTR Value 470k
SYMBOL TL974 192 2736 R0
SYMATTR InstName U9
SYMBOL TL974 816 2752 R0
SYMATTR InstName U10
SYMBOL res 64 2704 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R15
SYMATTR Value 470
SYMBOL res 592 2720 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R16
SYMATTR Value 1k
SYMBOL res 864 2560 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R17
SYMATTR Value 1k
SYMBOL pot 160 2544 R270
WINDOW 3 142 -44 VRight 2
SYMATTR Value Rtot=1k wiper=0.355
SYMATTR InstName U12
SYMBOL res -416 1360 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R14
SYMATTR Value {RectResVal}
TEXT -136 16 Left 2 ;Voltage Supply
TEXT -216 -176 Left 2 ;General
TEXT -1224 264 Left 2 !.tran {TranEnd}
TEXT -1232 -72 Left 2 !.param TranEnd=10/{Freq} Freq=5k Amplitude=100m Offset=0
TEXT -1256 -168 Left 2 ;Simulation
TEXT -1232 -24 Left 2 !.include pot.sub
TEXT -1208 208 Left 2 ;.dc V6 0 110m 1m
TEXT -968 808 Left 2 !.param RectResVal=1k TuneDiff=1050 TunePeak=1000
TEXT 1952 272 Left 2 !.MODEL BD135 NPN (\n+IS=1e-09 BF=222.664 NF=0.85 VAF=36.4079\n+IKF=0.166126 ISE=5.03418e-09 NE=1.45313 BR=1.35467\n+NR=1.33751 VAR=142.931 IKR=1.66126 ISC=5.02557e-09\n+NC=3.10227 RB=26.9143 IRB=0.1 RBM=0.1\n+RE=0.000472454 RC=1.04109 XTB=0.727762 XTI=1.04311\n+EG=1.05 CJE=1e-11 VJE=0.75 MJE=0.33\n+TF=1e-09 XTF=1 VTF=10 ITF=0.01\n+CJC=1e-11 VJC=0.75 MJC=0.33 XCJC=0.9\n+FC=0.5 CJS=0 VJS=0.75 MJS=0.5\n+TR=1e-07 PTF=0 KF=0 AF=1 )\n* Model generated on Feb 22, 2004\n* Model format: SPICE3
TEXT 1952 -200 Left 2 !.MODEL BD136 PNP\n+IS=1e-09 BF=681.414 NF=0.85 VAF=10\n+IKF=0.196957 ISE=1e-08 NE=1.57381 BR=56.5761\n+NR=1.5 VAR=0.975138 IKR=0.952908 ISC=1e-08\n+NC=3.58666 RB=40.4245 IRB=0.1 RBM=0.106663\n+RE=0.00034585 RC=1.31191 XTB=22.4074 XTI=1\n+EG=1.05 CJE=1e-11 VJE=0.75 MJE=0.33\n+TF=1e-09 XTF=1 VTF=10 ITF=0.01\n+CJC=1e-11 VJC=0.75 MJC=0.33 XCJC=0.9\n+FC=0.5 CJS=0 VJS=0.75 MJS=0.5\n+TR=1e-07 PTF=0 KF=0 AF=1\n* Model generated on Feb 22, 2004\n* Model format: SPICE3
RECTANGLE Normal 176 -32 -240 432 2
RECTANGLE Normal 1008 480 -288 -224 1
RECTANGLE Normal -352 320 -1280 -224
RECTANGLE Normal -2064 2016 112 656 2
